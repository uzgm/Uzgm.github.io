<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>ëª¨ë°”ì¼ ëŒ•ëŒ• ë ˆì´ì„œ</title>
    <style>
        body { margin: 0; background: #2ecc71; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; font-family: sans-serif; touch-action: none; }
        
        #game-area { 
            position: relative; 
            width: 100vw; 
            height: 100vh; 
            max-width: 500px; 
            background: #34495e; 
            border-left: 5px solid #ecf0f1; 
            border-right: 5px solid #ecf0f1; 
            overflow: hidden; 
        }
        
        /* ì¤‘ì•™ì„  */
        .lane { position: absolute; left: 50%; width: 4px; height: 50px; background: white; transform: translateX(-50%); animation: moveLane 0.3s linear infinite; }
        @keyframes moveLane { from { top: -100px; } to { top: 100vh; } }

        /* ì£¼ì¸ê³µ ìë™ì°¨ */
        #player { 
            position: absolute; 
            width: 60px; 
            height: 60px; 
            font-size: 50px; 
            bottom: 50px; 
            left: calc(50% - 30px); 
            z-index: 10; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            transition: left 0.15s ease-out; 
        }
        
        /* ì¥ì• ë¬¼ */
        .obs { position: absolute; width: 50px; height: 50px; font-size: 40px; text-align: center; z-index: 5; }
        
        .score-board { position: absolute; top: 20px; left: 20px; color: white; font-size: 24px; font-weight: bold; text-shadow: 2px 2px #000; z-index: 100; }
        
        /* ëª¨ë°”ì¼ í„°ì¹˜ ì•ˆë‚´ ë ˆì´ì–´ */
        .touch-hint { position: absolute; bottom: 10px; width: 100%; text-align: center; color: rgba(255,255,255,0.5); font-size: 14px; pointer-events: none; }
    </style>
</head>
<body>

<div id="game-area">
    <div class="score-board">SCORE: <span id="score">0</span></div>
    <div class="lane" style="top: 0;"></div>
    <div class="lane" style="top: 25vh;"></div>
    <div class="lane" style="top: 50vh;"></div>
    <div class="lane" style="top: 75vh;"></div>
    
    <div id="player">ğŸï¸</div>
    <div class="touch-hint">í™”ë©´ ì™¼ìª½/ì˜¤ë¥¸ìª½ì„ í„°ì¹˜í•´ì„œ ìš´ì „í•´!</div>
</div>

<script>
    const player = document.getElementById('player');
    const area = document.getElementById('game-area');
    const scoreEl = document.getElementById('score');

    let screenWidth = area.clientWidth;
    let posX = screenWidth / 2 - 30;
    let score = 0;
    let isLive = true;

    // 1. ëª¨ë°”ì¼ í„°ì¹˜ ì¡°ì‘
    window.addEventListener('touchstart', (e) => {
        if (!isLive) return;
        const touchX = e.touches[0].clientX;
        if (touchX < screenWidth / 2) {
            posX = Math.max(10, posX - 60); // ì™¼ìª½
        } else {
            posX = Math.min(screenWidth - 70, posX + 60); // ì˜¤ë¥¸ìª½
        }
        player.style.left = posX + 'px';
    });

    // 2. PC í‚¤ë³´ë“œ ì¡°ì‘ (ë‘˜ ë‹¤ ë˜ê²Œ!)
    document.addEventListener('keydown', (e) => {
        if (!isLive) return;
        if (e.key === 'ArrowLeft' && posX > 10) posX -= 40;
        if (e.key === 'ArrowRight' && posX < screenWidth - 70) posX += 40;
        player.style.left = posX + 'px';
    });

    function spawnObs() {
        if (!isLive) return;
        const obs = document.createElement('div');
        obs.className = 'obs';
        const items = ['ğŸ’©', 'ğŸš§', 'ğŸ”¥', 'ğŸŒ', 'ğŸ’£'];
        obs.innerHTML = items[Math.floor(Math.random() * items.length)];
        obs.style.left = Math.floor(Math.random() * (screenWidth - 50)) + 'px';
        obs.style.top = '-80px';
        area.appendChild(obs);

        let fall = setInterval(() => {
            if (!isLive) { clearInterval(fall); return; }
            let top = parseInt(obs.style.top);
            obs.style.top = (top + 7) + 'px';

            let pRect = player.getBoundingClientRect();
            let oRect = obs.getBoundingClientRect();

            // ì¶©ëŒ ê°ì§€ (ì—¬ìœ ìˆê²Œ íŒì •)
            if (!(pRect.right < oRect.left + 5 || pRect.left > oRect.right - 5 || 
                  pRect.bottom < oRect.top + 5 || pRect.top > oRect.bottom - 5)) {
                isLive = false;
                alert("ğŸ’¥ ì‚¬ê³  ë°œìƒ! ì ìˆ˜: " + score + "\në‹¤ì‹œ ë„ì „í•˜ë ¤ë©´ í™•ì¸ì„ ëˆŒëŸ¬!");
                location.reload();
            }

            if (top > window.innerHeight) {
                clearInterval(fall);
                obs.remove();
                score += 100;
                scoreEl.innerText = score;
            }
        }, 20);

        setTimeout(spawnObs, Math.max(400, 1000 - (score/20)));
    }

    spawnObs();
</script>
</body>
</html>
