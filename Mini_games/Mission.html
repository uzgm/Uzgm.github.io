<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì˜¤ëŠ˜ì˜ ë¯¸ì…˜ V3</title>
    <style>
        :root {
            --dog-white: #ffffff;
            --dog-beige: #f5f5dc;
            --dog-brown: #8b4513;
            --accent: #d2b48c;
            --star-gold: #ffcc00;
        }

        body {
            background-color: #f0ede5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Malgun Gothic', sans-serif;
        }

        #mission-card {
            background-color: var(--dog-white);
            border: 10px solid var(--dog-beige);
            border-radius: 60px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 400px;
            position: relative;
        }

        #mission-card::before, #mission-card::after {
            content: '';
            position: absolute;
            top: -40px;
            width: 90px;
            height: 120px;
            background-color: var(--dog-beige);
            border-radius: 50% 50% 30% 30%;
            z-index: -1;
        }
        #mission-card::before { left: 30px; transform: rotate(-25deg); }
        #mission-card::after { right: 30px; transform: rotate(25deg); }

        .dog-nose { width: 30px; height: 20px; background: #333; border-radius: 50%; margin: 10px auto; }

        h1 { color: var(--dog-brown); font-size: 1.6rem; margin: 10px 0; }
        
        .select-group { margin-bottom: 20px; }
        select {
            padding: 10px;
            border-radius: 15px;
            border: 2px solid var(--accent);
            background: white;
            color: var(--dog-brown);
            font-weight: bold;
            width: 80%;
            cursor: pointer;
        }

        .btn {
            background-color: var(--dog-beige);
            border: 3px solid var(--accent);
            padding: 15px 35px;
            border-radius: 40px;
            cursor: pointer;
            font-weight: 800;
            transition: all 0.2s;
            color: var(--dog-brown);
            box-shadow: 0 4px 0 var(--accent);
        }

        .btn:active { transform: translateY(4px); box-shadow: none; }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; box-shadow: none; transform: translateY(4px); }

        #timer-msg { color: #e67e22; font-size: 0.9rem; margin-top: 10px; font-weight: bold; }

        #result { 
            margin-top: 25px; padding: 20px; background: #fffdf9; border-radius: 25px;
            border: 2px dashed var(--accent); display: none; animation: bounce 0.5s ease;
        }

        @keyframes bounce { 0% { transform: scale(0.8); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        .stars { color: var(--star-gold); font-size: 1.4rem; margin: 10px 0; }
        .game-tag { display: inline-block; padding: 6px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: bold; color: white; margin-bottom: 15px; }
        .bg-pubg { background: #f39c12; }
        .bg-valo { background: #ff4655; }
        .bg-gta { background: #2ecc71; }
    </style>
</head>
<body>

<div id="mission-card">
    <div style="font-size: 50px;">ğŸ¶</div>
    <div class="dog-nose"></div>
    <h1>ë©-ë¯¸ì…˜ ì„ íƒê¸°</h1>
    
    <div class="select-group">
        <select id="game-select">
            <option value="all">ëœë¤ ê²Œì„</option>
            <option value="ë°°í‹€ê·¸ë¼ìš´ë“œ">ë°°í‹€ê·¸ë¼ìš´ë“œ</option>
            <option value="ë°œë¡œë€íŠ¸">ë°œë¡œë€íŠ¸</option>
            <option value="GTA 5">GTA 5</option>
        </select>
    </div>
    
    <button id="draw-btn" class="btn" onclick="getMission()">ğŸ¾ ë¯¸ì…˜ ë½‘ê¸°!</button>
    <div id="timer-msg"></div>

    <div id="result">
        <div id="game-type" class="game-tag"></div>
        <div id="star-rating" class="stars"></div>
        <div id="mission-text" style="font-weight: bold; font-size: 1.1rem; line-height: 1.4; color: #444;"></div>
    </div>
</div>

<script>
    const missions = [
        { game: "ë°°í‹€ê·¸ë¼ìš´ë“œ", stars: 1, task: "ë¶•ëŒ€ë§Œ ì¨ì„œ íƒ‘ 10 ì§„ì…í•˜ê¸°" },
        { game: "ë°°í‹€ê·¸ë¼ìš´ë“œ", stars: 2, task: "ì˜¤í† ë°”ì´ë¡œ ê³µì¤‘ì œë¹„ í•œ ë°”í€´ ëŒê³  ìƒì¡´í•˜ê¸°" },
        { game: "ë°°í‹€ê·¸ë¼ìš´ë“œ", stars: 3, task: "ìˆ˜ë¥˜íƒ„ìœ¼ë¡œë§Œ 1í‚¬ ì´ìƒ í•˜ê¸°" },
        { game: "ë°°í‹€ê·¸ë¼ìš´ë“œ", stars: 4, task: "ìê¸°ì¥ ë°–ì—ì„œ 3ë¶„ ë²„í‹°ê¸°" },
        { game: "ë°°í‹€ê·¸ë¼ìš´ë“œ", stars: 5, task: "í”„ë¼ì´íŒ¬ìœ¼ë¡œ ë§‰íƒ€ ì¹˜ê¸°" },
        { game: "ë°œë¡œë€íŠ¸", stars: 1, task: "í•œ ë¼ìš´ë“œ ë‚´ë‚´ ê¶Œì´ë§Œ ì‚¬ìš©í•˜ê¸°" },
        { game: "ë°œë¡œë€íŠ¸", stars: 2, task: "ìŠ¤í‚¬ ì•ˆ ì“°ê³  ì´ìœ¼ë¡œë§Œ 3í‚¬" },
        { game: "ë°œë¡œë€íŠ¸", stars: 3, task: "ì  ë’¤í†µìˆ˜ ì¹¼ë¹µ ì‹œë„í•˜ê¸°" },
        { game: "ë°œë¡œë€íŠ¸", stars: 4, task: "í´ëŸ¬ì¹˜ ì„±ê³µí•˜ê³  '?' ì¹˜ê¸°" },
        { game: "ë°œë¡œë€íŠ¸", stars: 5, task: "ê¶ê·¹ê¸°ë¡œ 3ëª… ì´ìƒ ì²˜ì¹˜" },
        { game: "GTA 5", stars: 1, task: "íƒì‹œë§Œ íƒ€ê³  ëª©ì ì§€ ê°€ê¸°" },
        { game: "GTA 5", stars: 2, task: "ë¹„í–‰ê¸°ë¡œ ë¹Œë”© ì‚¬ì´ í†µê³¼ 5ë²ˆ" },
        { game: "GTA 5", stars: 3, task: "ë‚™í•˜ì‚° ì—†ì´ ìˆ˜ì˜ì¥ ê³¨ì¸" },
        { game: "GTA 5", stars: 4, task: "ì°¨ ì•ˆ ë°”ê¾¸ê³  ë³„ 5ê°œ ë”°ëŒë¦¬ê¸°" },
        { game: "GTA 5", stars: 5, task: "ê¸°ì°¨ ìœ„ì— ì°¨ ì˜¬ë¦¬ê³  3ë¶„ ë²„í‹°ê¸°" }
    ];

    let timerInterval;

    window.onload = function() {
        checkCooldown();
    };

    function checkCooldown() {
        const lastTime = localStorage.getItem('lastMissionTime');
        if (lastTime) {
            const now = new Date().getTime();
            const diff = now - lastTime;
            const cooldown = 5 * 60 * 1000; // 5ë¶„

            if (diff < cooldown) {
                startTimer(cooldown - diff);
                const saved = JSON.parse(localStorage.getItem('todayMission'));
                if(saved) displayMission(saved);
            }
        }
    }

    function getMission() {
        const selectedGame = document.getElementById('game-select').value;
        let filteredMissions = missions;

        if (selectedGame !== 'all') {
            filteredMissions = missions.filter(m => m.game === selectedGame);
        }

        const selected = filteredMissions[Math.floor(Math.random() * filteredMissions.length)];
        
        localStorage.setItem('lastMissionTime', new Date().getTime());
        localStorage.setItem('todayMission', JSON.stringify(selected));

        displayMission(selected);
        startTimer(5 * 60 * 1000);
    }

    function displayMission(mission) {
        const resDiv = document.getElementById('result');
        const tag = document.getElementById('game-type');
        resDiv.style.display = 'block';
        tag.innerText = mission.game;
        tag.className = 'game-tag ' + (mission.game === "ë°°í‹€ê·¸ë¼ìš´ë“œ" ? 'bg-pubg' : mission.game === "ë°œë¡œë€íŠ¸" ? 'bg-valo' : 'bg-gta');
        document.getElementById('star-rating').innerText = "â­".repeat(mission.stars);
        document.getElementById('mission-text').innerText = mission.task;
    }

    function startTimer(duration) {
        const btn = document.getElementById('draw-btn');
        const msg = document.getElementById('timer-msg');
        btn.disabled = true;

        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            const minutes = Math.floor(duration / 60000);
            const seconds = Math.floor((duration % 60000) / 1000);
            
            msg.innerText = `ì¬ì¶©ì „ê¹Œì§€: ${minutes}ë¶„ ${seconds}ì´ˆ`;
            duration -= 1000;

            if (duration < 0) {
                clearInterval(timerInterval);
                btn.disabled = false;
                msg.innerText = "ìƒˆ ë¯¸ì…˜ì„ ë½‘ì„ ìˆ˜ ìˆì–´!";
            }
        }, 1000);
    }
</script>
</body>
</html>
